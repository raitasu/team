import{m}from"./index-82eae258.js";import{bd as u,be as n,bf as p,cN as y,co as d,cO as c}from"./index-7c96dcd7.js";const l=(s,e)=>{Object.keys(e).forEach(a=>{switch(a){case"languages":{const t=e[a];t&&t.forEach(({level:o,name:r})=>{s.append(`${a}[][${r}]`,o||"any")});break}case"work_experience_start":{const t=e[a];t&&s.append("experience_years[min]",`${t}`);break}case"work_experience_end":{const t=e[a];t&&s.append("experience_years[max]",`${t}`);break}default:{const t=e[a];if(Array.isArray(t)){t.forEach(o=>{s.append(`${a}[]`,`${o}`)});break}t&&s.append(a,t)}}})},E=u.injectEndpoints({overrideExisting:!1,endpoints:s=>({getEmployees:s.query({providesTags:e=>e?[...e.items.map(a=>({type:n.Employees,id:a.id})),{type:n.Employees,id:"LIST"}]:[{type:n.Employees,id:"LIST"}],onQueryStarted:p(e=>y.safeParse(e)),query:({page:e,elementsPerPage:a,filters:t={},sorting:o=[]})=>{const r=new URLSearchParams({items:`${a}`,offset:`${m(e,a)}`,page:e.toString()});if(l(r,t),o.length>0){const[i]=o;r.append(`sort[${i.id==="date_of_birth"?"age":i.id}]`,i.desc?"desc":"asc")}return{url:"employees",method:"GET",params:r}}}),getEmployee:s.query({providesTags:e=>[{type:n.Employees,id:`${e?e.id:"ENTITY"}`}],onQueryStarted:p(e=>d.safeParse(e)),query:e=>({url:`employees/${e}`,method:"GET"})}),createEmployee:s.mutation({invalidatesTags:[{type:n.Employees,id:"LIST"}],onQueryStarted:p(e=>d.safeParse(e)),query:e=>{const a=new FormData;return a.append("first_name",e.first_name),a.append("email",e.email),a.append("last_name",e.last_name),a.append("status",e.status),e.avatar&&a.append("avatar",e.avatar),{url:"employees",method:"POST",body:a}}}),updateGeneralInformation:s.mutation({invalidatesTags:e=>[{type:n.Employees,id:`${e?e.id:"ENTITY"}`}],onQueryStarted:p(e=>c.safeParse(e)),query:({data:e,id:a})=>{const t=new FormData;return Object.entries(e).forEach(([o,r])=>{o==="avatar"&&r===null&&t.append(o,"null"),r&&typeof r!="number"&&t.append(o,r)}),{url:`employees/${a}`,method:"PATCH",body:t}}}),deleteEmployee:s.mutation({invalidatesTags:(e,a,t)=>[{type:n.Employees,id:`${t.id}`},{type:n.Employees,id:"LIST"}],query:({id:e})=>({url:`/employees/${e}`,method:"DELETE"})})})}),{useGetEmployeesQuery:h,useLazyGetEmployeesQuery:S,useGetEmployeeQuery:g,useCreateEmployeeMutation:$,useUpdateGeneralInformationMutation:_,useDeleteEmployeeMutation:v}=E;export{S as a,h as b,v as c,_ as d,g as e,$ as u};
